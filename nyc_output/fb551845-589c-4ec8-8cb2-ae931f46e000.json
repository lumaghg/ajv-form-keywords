{"C:\\Users\\robin\\Documents\\github\\verwaltungscloud\\ajv-form-keywords\\src\\keywords\\display\\displayOptions.keyword.ts":{"path":"C:\\Users\\robin\\Documents\\github\\verwaltungscloud\\ajv-form-keywords\\src\\keywords\\display\\displayOptions.keyword.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":42}},"2":{"start":{"line":4,"column":36},"end":{"line":110,"column":1}},"3":{"start":{"line":111,"column":0},"end":{"line":114,"column":2}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"C:/Users/robin/Documents/github/verwaltungscloud/ajv-form-keywords/src/keywords/display/displayOptions.keyword.ts","sources":["C:/Users/robin/Documents/github/verwaltungscloud/ajv-form-keywords/src/keywords/display/displayOptions.keyword.ts"],"names":[],"mappings":"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","sourcesContent":["import { JSONSchemaType, KeywordDefinition } from \"ajv\";\r\nimport { TDisplayOptions } from \"../../types/display/displayOptions.types\";\r\n\r\nconst ajvMetaSchemaDisplayOptions: JSONSchemaType<TDisplayOptions> = {\r\n\ttype: \"object\",\r\n\tadditionalProperties: false,\r\n\tproperties: {\r\n\t\tname: { type: \"string\", nullable: true },\r\n\t\tindex: { type: \"number\", nullable: true },\r\n\t\tdescription: { type: \"string\", nullable: true },\r\n\t\tisUnprocessed: { type: \"boolean\", nullable: true },\r\n\t\tgrid: {\r\n\t\t\ttype: \"object\",\r\n\t\t\tadditionalProperties: false,\r\n\t\t\tnullable: true,\r\n\t\t\tproperties: {\r\n\t\t\t\tsize: {\r\n\t\t\t\t\ttype: \"object\",\r\n\t\t\t\t\tadditionalProperties: false,\r\n\t\t\t\t\tnullable: true,\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\txs: { type: \"number\", nullable: true },\r\n\t\t\t\t\t\tsm: { type: \"number\", nullable: true },\r\n\t\t\t\t\t\tmd: { type: \"number\", nullable: true },\r\n\t\t\t\t\t\tlg: { type: \"number\", nullable: true },\r\n\t\t\t\t\t\txl: { type: \"number\", nullable: true },\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\twidth: { type: \"string\", nullable: true },\r\n\t\t\t},\r\n\t\t},\r\n\t\ttypeSpecificOptions: {\r\n\t\t\ttype: \"object\",\r\n\t\t\tadditionalProperties: false,\r\n\t\t\tnullable: true,\r\n\t\t\tproperties: {\r\n\t\t\t\tas: {\r\n\t\t\t\t\ttype: \"string\",\r\n\t\t\t\t\tnullable: true,\r\n\t\t\t\t},\r\n\t\t\t\tmultiline: { type: \"boolean\", nullable: true },\r\n\t\t\t\tenumWithDisplaynames: {\r\n\t\t\t\t\ttype: \"array\",\r\n\t\t\t\t\tnullable: true,\r\n\t\t\t\t\titems: {\r\n\t\t\t\t\t\ttype: \"object\",\r\n\t\t\t\t\t\tadditionalProperties: false,\r\n\t\t\t\t\t\trequired: [\"name\", \"value\"],\r\n\t\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t\tname: { type: \"string\" },\r\n\t\t\t\t\t\t\tvalue: { type: \"string\" },\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tcheckboxText: { type: \"string\", nullable: true },\r\n\t\t\t\tlinks: {\r\n\t\t\t\t\ttype: \"array\",\r\n\t\t\t\t\tnullable: true,\r\n\t\t\t\t\titems: {\r\n\t\t\t\t\t\ttype: \"object\",\r\n\t\t\t\t\t\tadditionalProperties: false,\r\n\t\t\t\t\t\trequired: [\"linkText\", \"html\"],\r\n\t\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t\tlinkText: { type: \"string\" },\r\n\t\t\t\t\t\t\thtml: { type: \"string\" },\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tcurrency: {\r\n\t\t\t\t\ttype: \"object\",\r\n\t\t\t\t\tnullable: true,\r\n\t\t\t\t\trequired: [\"position\", \"currencySign\"],\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\tposition: { type: \"string\", enum: [\"before\", \"after\"] },\r\n\t\t\t\t\t\tcurrencySign: { type: \"string\" },\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tunitOfMeasure: {\r\n\t\t\t\t\ttype: \"object\",\r\n\t\t\t\t\tnullable: true,\r\n\t\t\t\t\trequired: [\"position\", \"unitSymbol\"],\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\tposition: { type: \"string\", enum: [\"before\", \"after\"] },\r\n\t\t\t\t\t\tunitSymbol: { type: \"string\" },\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tintervalConverter: { type: \"boolean\", nullable: true },\r\n\t\t\t\tnumberOfItemsControls: {\r\n\t\t\t\t\ttype: \"object\",\r\n\t\t\t\t\tadditionalProperties: false,\r\n\t\t\t\t\tnullable: true,\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\tinputField: { type: \"boolean\", nullable: true },\r\n\t\t\t\t\t\taddAndSubtractButtons: {\r\n\t\t\t\t\t\t\ttype: \"boolean\",\r\n\t\t\t\t\t\t\tnullable: true,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\taddAndRemoveButtons: {\r\n\t\t\t\t\t\t\ttype: \"boolean\",\r\n\t\t\t\t\t\t\tnullable: true,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tminDate: { type: \"string\", nullable: true },\r\n\t\t\t\tmaxDate: { type: \"string\", nullable: true },\r\n\t\t\t\tasInfo: { type: \"boolean\", nullable: true },\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n} as JSONSchemaType<TDisplayOptions>;\r\n\r\nexport const displayOptionsDefinition: KeywordDefinition = {\r\n\tkeyword: \"display\",\r\n\tmetaSchema: ajvMetaSchemaDisplayOptions,\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ba125ddf50b247f3faff0e7645b58ddd66a3f7ce","contentHash":"5d24dd957ff1bc056329e7dc300d23680e34412ad0d25a89e022c57098b2d51f"},"C:\\Users\\robin\\Documents\\github\\verwaltungscloud\\ajv-form-keywords\\src\\keywords\\fileupload\\fileUploadOptions.keyword.ts":{"path":"C:\\Users\\robin\\Documents\\github\\verwaltungscloud\\ajv-form-keywords\\src\\keywords\\fileupload\\fileUploadOptions.keyword.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":45}},"2":{"start":{"line":4,"column":14},"end":{"line":4,"column":28}},"3":{"start":{"line":5,"column":39},"end":{"line":12,"column":1}},"4":{"start":{"line":15,"column":4},"end":{"line":15,"column":43}},"5":{"start":{"line":18,"column":4},"end":{"line":51,"column":6}},"6":{"start":{"line":19,"column":8},"end":{"line":50,"column":11}},"7":{"start":{"line":20,"column":12},"end":{"line":34,"column":13}},"8":{"start":{"line":21,"column":46},"end":{"line":21,"column":85}},"9":{"start":{"line":22,"column":39},"end":{"line":22,"column":89}},"10":{"start":{"line":22,"column":58},"end":{"line":22,"column":88}},"11":{"start":{"line":23,"column":16},"end":{"line":33,"column":19}},"12":{"start":{"line":24,"column":38},"end":{"line":24,"column":89}},"13":{"start":{"line":25,"column":20},"end":{"line":32,"column":21}},"14":{"start":{"line":26,"column":24},"end":{"line":31,"column":28}},"15":{"start":{"line":35,"column":12},"end":{"line":48,"column":13}},"16":{"start":{"line":36,"column":36},"end":{"line":36,"column":65}},"17":{"start":{"line":37,"column":16},"end":{"line":47,"column":17}},"18":{"start":{"line":38,"column":37},"end":{"line":38,"column":70}},"19":{"start":{"line":39,"column":20},"end":{"line":46,"column":21}},"20":{"start":{"line":40,"column":24},"end":{"line":45,"column":28}},"21":{"start":{"line":49,"column":12},"end":{"line":49,"column":26}},"22":{"start":{"line":53,"column":0},"end":{"line":57,"column":2}}},"fnMap":{"0":{"name":"getBase64FileSize","decl":{"start":{"line":13,"column":9},"end":{"line":13,"column":26}},"loc":{"start":{"line":13,"column":38},"end":{"line":16,"column":1}},"line":13},"1":{"name":"fileUploadOptionsCompileFunction","decl":{"start":{"line":17,"column":9},"end":{"line":17,"column":41}},"loc":{"start":{"line":17,"column":76},"end":{"line":52,"column":1}},"line":17},"2":{"name":"(anonymous_2)","decl":{"start":{"line":18,"column":11},"end":{"line":18,"column":12}},"loc":{"start":{"line":18,"column":27},"end":{"line":51,"column":5}},"line":18},"3":{"name":"(anonymous_3)","decl":{"start":{"line":19,"column":27},"end":{"line":19,"column":28}},"loc":{"start":{"line":19,"column":48},"end":{"line":50,"column":9}},"line":19},"4":{"name":"(anonymous_4)","decl":{"start":{"line":22,"column":48},"end":{"line":22,"column":49}},"loc":{"start":{"line":22,"column":58},"end":{"line":22,"column":88}},"line":22},"5":{"name":"(anonymous_5)","decl":{"start":{"line":23,"column":35},"end":{"line":23,"column":36}},"loc":{"start":{"line":23,"column":54},"end":{"line":33,"column":17}},"line":23}},"branchMap":{"0":{"loc":{"start":{"line":20,"column":12},"end":{"line":34,"column":13}},"type":"if","locations":[{"start":{"line":20,"column":12},"end":{"line":34,"column":13}},{"start":{"line":20,"column":12},"end":{"line":34,"column":13}}],"line":20},"1":{"loc":{"start":{"line":24,"column":69},"end":{"line":24,"column":88}},"type":"binary-expr","locations":[{"start":{"line":24,"column":69},"end":{"line":24,"column":82}},{"start":{"line":24,"column":86},"end":{"line":24,"column":88}}],"line":24},"2":{"loc":{"start":{"line":25,"column":20},"end":{"line":32,"column":21}},"type":"if","locations":[{"start":{"line":25,"column":20},"end":{"line":32,"column":21}},{"start":{"line":25,"column":20},"end":{"line":32,"column":21}}],"line":25},"3":{"loc":{"start":{"line":35,"column":12},"end":{"line":48,"column":13}},"type":"if","locations":[{"start":{"line":35,"column":12},"end":{"line":48,"column":13}},{"start":{"line":35,"column":12},"end":{"line":48,"column":13}}],"line":35},"4":{"loc":{"start":{"line":39,"column":20},"end":{"line":46,"column":21}},"type":"if","locations":[{"start":{"line":39,"column":20},"end":{"line":46,"column":21}},{"start":{"line":39,"column":20},"end":{"line":46,"column":21}}],"line":39}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":0,"15":1,"16":1,"17":1,"18":1,"19":1,"20":0,"21":1,"22":1},"f":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"b":{"0":[1,0],"1":[1,0],"2":[0,1],"3":[1,0],"4":[0,1]},"inputSourceMap":{"version":3,"file":"C:/Users/robin/Documents/github/verwaltungscloud/ajv-form-keywords/src/keywords/fileupload/fileUploadOptions.keyword.ts","sources":["C:/Users/robin/Documents/github/verwaltungscloud/ajv-form-keywords/src/keywords/fileupload/fileUploadOptions.keyword.ts"],"names":[],"mappings":";;;AAAA,6BAAyE;AAGzE,MAAM,8BAA8B,GAAuC;IAC1E,IAAI,EAAE,QAAQ;IACd,oBAAoB,EAAE,KAAK;IAC3B,UAAU,EAAE;QACX,qBAAqB,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE;QACzD,WAAW,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE;KAC/C;CACqC,CAAC;AAExC,SAAS,iBAAiB,CAAC,SAAiB;IAC3C,2CAA2C;IAC3C,OAAO,CAAC,SAAS,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC;AACxC,CAAC;AAED,SAAS,gCAAgC,CACxC,iBAAqC,EACrC,aAAsB;IAEtB,OAAO,UACN,IAAoD;QAEpD,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;YACtC,IAAI,iBAAiB,CAAC,qBAAqB,EAAE,CAAC;gBAC7C,MAAM,qBAAqB,GAC1B,iBAAiB,CAAC,qBAA+B,CAAC;gBACnD,MAAM,cAAc,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CACxC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAC9B,CAAC;gBACF,cAAc,CAAC,GAAG,CAAC,CAAC,aAAa,EAAE,EAAE;oBACpC,MAAM,SAAS,GAAG,qBAAqB,CAAC,QAAQ,CAC/C,aAAa,IAAI,EAAE,CACnB,CAAC;oBACF,IAAI,CAAC,SAAS,EAAE,CAAC;wBAChB,MAAM,CACL,IAAI,qBAAe,CAAC;4BACnB;gCACC,OAAO,EAAE,kCAAkC;gCAC3C,OAAO,EAAE,+BAA+B,aAAa,EAAE;6BACvD;yBACD,CAAC,CACF,CAAC;oBACH,CAAC;gBACF,CAAC,CAAC,CAAC;YACJ,CAAC;YAED,IAAI,iBAAiB,CAAC,WAAW,EAAE,CAAC;gBACnC,MAAM,WAAW,GAAG,iBAAiB,CAAC,WAAqB,CAAC;gBAC5D,KAAK,MAAM,IAAI,IAAI,IAAI,EAAE,CAAC;oBACzB,MAAM,QAAQ,GAAG,iBAAiB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;oBACnD,IAAI,QAAQ,GAAG,WAAW,EAAE,CAAC;wBAC5B,MAAM,CACL,IAAI,qBAAe,CAAC;4BACnB;gCACC,OAAO,EAAE,wBAAwB;gCACjC,OAAO,EAAE,sBAAsB,IAAI,CAAC,QAAQ,eAAe,QAAQ,wBAAwB,WAAW,QAAQ;6BAC9G;yBACD,CAAC,CACF,CAAC;oBACH,CAAC;gBACF,CAAC;YACF,CAAC;YACD,OAAO,CAAC,IAAI,CAAC,CAAC;QACf,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC;AACH,CAAC;AAEY,QAAA,2BAA2B,GAAsB;IAC7D,OAAO,EAAE,YAAY;IACrB,UAAU,EAAE,8BAA8B;IAC1C,OAAO,EAAE,gCAAgC;CACzC,CAAC","sourcesContent":["import { JSONSchemaType, KeywordDefinition, ValidationError } from \"ajv\";\r\nimport { TFileUploadOptions } from \"../../types/display/fileuploadOptions.types\";\r\n\r\nconst ajvMetaSchemaFileUploadOptions: JSONSchemaType<TFileUploadOptions> = {\r\n\ttype: \"object\",\r\n\tadditionalProperties: false,\r\n\tproperties: {\r\n\t\tallowedFileExtensions: { type: \"string\", nullable: true },\r\n\t\tmaxFileSize: { type: \"number\", nullable: true },\r\n\t},\r\n} as JSONSchemaType<TFileUploadOptions>;\r\n\r\nfunction getBase64FileSize(base64Uri: string) {\r\n\t//https://en.wikipedia.org/wiki/Base64#MIME\r\n\treturn (base64Uri.length - 814) / 1.37;\r\n}\r\n\r\nfunction fileUploadOptionsCompileFunction(\r\n\tfileUploadOptions: TFileUploadOptions,\r\n\t_parentSchema: unknown\r\n) {\r\n\treturn function (\r\n\t\tdata: Array<{ filename: string; base64Uri: string }>\r\n\t): Promise<boolean> {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif (fileUploadOptions.allowedFileExtensions) {\r\n\t\t\t\tconst allowedFileExtensions =\r\n\t\t\t\t\tfileUploadOptions.allowedFileExtensions as string;\r\n\t\t\t\tconst fileExtensions = data.map((file) =>\r\n\t\t\t\t\tfile.filename.split(\".\").pop()\r\n\t\t\t\t);\r\n\t\t\t\tfileExtensions.map((fileExtension) => {\r\n\t\t\t\t\tconst isAllowed = allowedFileExtensions.includes(\r\n\t\t\t\t\t\tfileExtension || \"\"\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (!isAllowed) {\r\n\t\t\t\t\t\treject(\r\n\t\t\t\t\t\t\tnew ValidationError([\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tkeyword: \"fileUpload.allowedFileExtensions\",\r\n\t\t\t\t\t\t\t\t\tmessage: `File extension not allowed: ${fileExtension}`,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t])\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (fileUploadOptions.maxFileSize) {\r\n\t\t\t\tconst maxFileSize = fileUploadOptions.maxFileSize as number;\r\n\t\t\t\tfor (const file of data) {\r\n\t\t\t\t\tconst fileSize = getBase64FileSize(file.base64Uri);\r\n\t\t\t\t\tif (fileSize > maxFileSize) {\r\n\t\t\t\t\t\treject(\r\n\t\t\t\t\t\t\tnew ValidationError([\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tkeyword: \"fileUpload.maxFileSize\",\r\n\t\t\t\t\t\t\t\t\tmessage: `File size for file ${file.filename} too large: ${fileSize} Bytes, max allowed: ${maxFileSize} Bytes`,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t])\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tresolve(true);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport const fileUploadOptionsDefinition: KeywordDefinition = {\r\n\tkeyword: \"fileUpload\",\r\n\tmetaSchema: ajvMetaSchemaFileUploadOptions,\r\n\tcompile: fileUploadOptionsCompileFunction,\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6e0785ea209cfcf7e9213a8fe88a807098a2acb8","contentHash":"b05f48d02b7f3a626f84848be7a781d7754561053bbac0862f0c76b88e7fcdc3"}}